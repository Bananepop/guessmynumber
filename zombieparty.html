<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zombie Banana Party</title>
    <style>
        img {
            width: 100px;
        }
    </style>
</head>

<body>
    <h1>Welcome to the Zombie Banana Party!</h1>

    <h2>Add a New Guest:</h2>
    <input type="text" id="bananaName" placeholder="Enter Zombie Banana Name">
    <button onclick="addGuest()">Add to Guest List</button>

    <h2>Guest List:</h2>
    <ul id="guestList">
        <!-- Guests will be displayed here -->
    </ul>

    <h2>Total Guests: <span id="totalCount">0</span></h2>

    <script>
        // Boilerplate code for the Zombie Banana Party application

        // Create an array to store the list of guests
        let guests = [{
            name: "Gaby",
            avatarg: "https://api.dicebear.com/7.x/adventurer/svg?seed=Gaby"
        }, {
            name: "Maria",
            avatarg: "https://api.dicebear.com/7.x/adventurer/svg?seed=Maria"
        }]; // declare two initial guests


        const renderListOfGuests = () => { // function declaration (blue print, what i want the machine to do)
            // 3. Render this list out as HTML

            // The ul inner elements are deleted to avoid repeating the names of the guests array
            document.getElementById('guestList').innerHTML = ""

            guests.forEach(
                guestInTheLoop => {
                    const newListItem = document.createElement("li")
                    const guestName = document.createElement("h2")
                    const avatarImage = document.createElement("img") // Create three elements on the fly

                    guestName.innerHTML = guestInTheLoop.name // put object properties in new HTML elements
                    avatarImage.src = guestInTheLoop.avatarg

                    newListItem.appendChild(guestName)
                    newListItem.appendChild(avatarImage) // put elements into list containers

                    document.getElementById('guestList').appendChild(newListItem) // put list containers into where it goes in the page, into the html.
                }
            )

            // 4. Update the number of the Total Guest
            document.getElementById('totalCount').innerHTML = guests.length

        }
        renderListOfGuests() // function execution (run the function, create an instance of the blueprint)


        const addGuest = () => {
            console.log('Adding Guest...')
            //Todos:
            // 1. Check the name from the input tag and put it in a variable

            const guestName = document.getElementById('bananaName').value //value va a ser lo que escriba el usuario
            console.log("The new guest name is: " + guestName)

            // 2. Push (append) the guest to the guest's list

            console.log("adding guest " + guestName + " to the list")
            console.log("lista antes de actualizar invitados: " + guests)
            const newGuest = {
                name: guestName,
                avatarg: "https://api.dicebear.com/7.x/adventurer/svg?seed=" + guestName
            }
            guests.push(newGuest)
            console.log("lista despues de actualizar invitados: " + guests)

            renderListOfGuests()

        }
    </script>
</body>

</html>